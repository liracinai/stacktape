stackName: web-scraper

resources:
  mainGateway:
    Type: http-api-gateway
    Properties:
      accessLogs:
        enabled: true
        format: JSON
      cors:
        enabled: true

  scrapeLinks:
    Type: function
    Properties:
      packageConfig:
        filePath: src/lambdas/scrape-links.ts:handler
        dependenciesToIgnore:
          - puppeteer
      events:
        - type: http-api-gateway
          properties:
            httpApiGatewayName: mainGateway
            path: /scrape-links/{url}
            method: GET
